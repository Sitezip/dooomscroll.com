<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Doomscroll</title>
  <style>
    /* Base styling */
    body {
      margin: 0;
      font-family: 'Impact', 'Arial Black', sans-serif;
      background-color: white;
      color: black;
      scroll-behavior: smooth;
      transition: background-color 0.3s, color 0.3s;
    }

    #doom-container {
      padding: 50px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .doom-line {
      font-size: 48px;
      font-weight: 900;
      text-align: center;
      margin: 20px 0;
    }

    #continue-button {
      display: none;
      padding: 20px 40px;
      margin: 50px auto;
      font-size: 24px;
      font-weight: bold;
      font-family: inherit;
      background-color: black;
      color: white;
      border: 4px solid black;
      cursor: pointer;
      transition: background-color 0.2s, color 0.2s;
    }

    #continue-button:hover {
      background-color: white;
      color: black;
    }

    #continue-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    /* Make scroll faster */
    html {
      scroll-behavior: auto;
    }

    .spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid currentColor;
    border-top: 3px solid transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin-left: 10px;
    vertical-align: middle;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  </style>
</head>
<body>

  <div id="doom-container"></div>
  <div id="continue-wrapper">
    <button id="continue-button">Continue Doomscrolling</button>
  </div>

  <script>
    const container = document.getElementById('doom-container');
    const continueButton = document.getElementById('continue-button');
    let doomCount = 0;
    let isPaused = false;
    let isInverted = false;
    const CHECKPOINT_INTERVAL = 1000; // 1_000_000 Change to 100 or so for easier testing

    // Generate doom lines
    function generateDoomLines(batch = 100) {
      if (isPaused) return;

      for (let i = 0; i < batch; i++) {
        doomCount++;
        const line = document.createElement('div');
        line.className = 'doom-line';
        line.textContent = `Doom ${doomCount}`;
        container.appendChild(line);

        if (doomCount % CHECKPOINT_INTERVAL === 0) {
          pauseAndShowButton();
          break;
        }
      }
    }

    function pauseAndShowButton() {
      isPaused = true;
      continueButton.style.display = 'block';
    }

    async function handleContinue() {
        continueButton.disabled = true;

        const originalText = 'Continue Doomscrolling';
        continueButton.textContent = 'Verifying...';

        // Add spinner
        const spinner = document.createElement('span');
        spinner.className = 'spinner';
        continueButton.appendChild(spinner);

        try {
            const response = await fetch('https://zzzap.io/Utilities/ips/mine');
            const data = await response.json();

            console.log('API Response:', data); // Debug info

            if (data.success === true) {
            continueButton.style.display = 'none';
            continueButton.disabled = false;
            continueButton.textContent = originalText;
            isPaused = false;
            toggleColors();
            generateDoomLines();
            } else {
            throw new Error('Verification failed');
            }
        } catch (err) {
            console.error('API Error:', err);

            continueButton.textContent = 'Error. Try Again in 5s';
            let countdown = 5;

            const interval = setInterval(() => {
            countdown--;
            continueButton.textContent = `Retrying in ${countdown}s`;
            if (countdown === 0) {
                clearInterval(interval);
                continueButton.textContent = originalText;
                continueButton.disabled = false;
            }
            }, 1000);
        } finally {
            // Remove spinner
            if (spinner && spinner.parentNode) {
            spinner.parentNode.removeChild(spinner);
            }
        }
    }

    // Toggle white/black theme
    function toggleColors() {
      isInverted = !isInverted;
      document.body.style.backgroundColor = isInverted ? 'black' : 'white';
      document.body.style.color = isInverted ? 'white' : 'black';
      continueButton.style.backgroundColor = isInverted ? 'white' : 'black';
      continueButton.style.color = isInverted ? 'black' : 'white';
      continueButton.style.borderColor = isInverted ? 'white' : 'black';
    }

    // Faster infinite scrolling
    window.addEventListener('scroll', () => {
      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 600) {
        generateDoomLines(200);
      }
    });

    // Doomscroll acceleration â€” autoscroll 10px every time user scrolls
    let scrollThrottle = false;
    let scrollHeight = 10_000; // Set a large scroll height

    window.addEventListener('wheel', (e) => {
        if (!scrollThrottle) {
            scrollThrottle = true;

            // Automatically scroll down by 10px
            window.scrollBy({ top: scrollHeight, left: 0, behavior: 'smooth' });

            setTimeout(() => {
                scrollThrottle = false;
            }, 20); // Throttle for smoothness
        }
    }, { passive: true });

    // Touch scrolling support
    window.addEventListener('touchmove', () => {
        window.scrollBy({ top: scrollHeight, left: 0, behavior: 'smooth' });
    }, { passive: true });

    continueButton.addEventListener('click', handleContinue);

    // Start initial doom
    generateDoomLines(300);
  </script>
</body>
</html>
